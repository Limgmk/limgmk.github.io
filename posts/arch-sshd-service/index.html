<!DOCTYPE html>
<html lang="zh-cmn-Hans"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0" />
    <title>Limgmk's Blog</title>

    <script src="/lib/jquery/jquery.js"></script>
    <script defer src="/js/ripple.js"></script>
    <script src="/js/leem.js"></script>
    <script src="/lib/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="/css/ripple.css">
    <link rel="stylesheet" href="/css/leem.css">
    <link rel="stylesheet" href="/css/md.css" />
    <link rel="stylesheet" href="/lib/highlight/styles/default.css">
    <link rel=" stylesheet" href="/css/toc.css" />
</head><body><style>
     
    .drawer {
        list-style-type: none;
        margin: 0;
        padding: 0;
        width: var(--drawer-width);
        background-color: #ffffff;
        position: fixed;
        height: 150%;
        overflow: auto;
        box-shadow: 0 1px 5px rgba(49, 49, 49, 0.6);
        transition: 0.3s;
        z-index: 500;
    }

    .drawer-brand {
        width: 100%;
        height: 209px;
        padding-left: 30px;
        background-color: #3E66D1;
        color: #ffffff;
    }

    .user-favicon {
        width: 100px;
        height: 100px;
        border-radius: 100px;
    }

    .drawer-brand h4 {
        margin: 10px 0;
    }

    .drawer-brand .email {
        font-size: 13px;
        color: #ffffff;
    }

    .drawer-brand .email:hover {
        text-decoration: #ffffff;
    }

    .drawer ul {
        padding: 0;
        list-style: none;
        list-style-type: none;
        width: 100%;
        margin: 0 atuo;
        display: block;
    }

    .drawer li {
        width: 240px;
        padding: 0 20px;
        list-style-type: none;
        margin: 0 atuo;
        display: block;
        font-size: 15px;
    }

    .drawer li:hover {
        background: rgba(0, 0, 0, 0.05);
    }

    .drawer li a {
        display: block;
        height: 44px;
        line-height: 44px;
        font-weight: 600;
        color: #727272;
        text-decoration: none;
    }

    .drawer li a:hover {
        color: var(--theme-color);
    }

    .drawer li a i {
        width: 48px;
        text-align: left;
    }
</style>

<div id="drawer" class="drawer">
    <div id="drawer-brand" class="drawer-brand vertical-center">
        
        <div>
            <img class="user-favicon" src="/img/user-favicon-white.jpg">
            <h4>Limgmk</h4>
            <a class="email" href="mailto:limgmkgm@gmail.com" target="_blank">limgmkgm@gmail.com</a>
        </div>
    </div>
    
    <ul>
        <li><a href="/"><i class="fa fa-home fa-lg"></i>Home</a></li>
        <li><a href="/posts"><i class="fa fa-archive fa-lg"></i>Archives</a></li>
        <li><a href="/tags/"><i class="fa fa-tags fa-lg"></i>Tags</a></li>
        <li><a href="https://github.com/Limgmk" target="_blank"><i class=" fa fa-github fa-lg"></i>Github</a></li>
        <li><a href="https://t.me/Limgmk" target="_blank"><i class="fa fa-telegram fa-lg"></i>Telegram</a></li>
    </ul>
</div><style>
     
    .header-bar {
        width: calc(100% - var(--drawer-width));
        height: var(--header-height);
        margin-left: var(--drawer-width);
        background-color: var(--theme-color);
        position: fixed;
        transition: var(--right-transtion);
        z-index: 498;
    }



     
    .header-widget {
        float: left;
        width: var(--header-height);
        height: var(--header-height);
        line-height: var(--header-height);
        overflow: hidden;
        text-align: center;
        border-radius: 50%;
        transition: 0.3s;
        position: relative;
        font-size: 15px;
    }

     
    .header-widget.smalltitle-widget {

        width: calc(100% - var(--header-height) * 3);
        color: var(--theme-color);
        border-radius: 0%;
        font-size: 16px;
        pointer-events: none;
        transition: 0s;
    }

     
    @media screen and (max-width: 1240px) {
        .header-bar {
            width: 100%;
            margin-left: 0;
        }
    }
</style>

<div id="header-bar" class="header-bar">
    <span id="drawer-toggle" class="header-widget drawer-toggle" onclick="changeDrawer()">
        <i id="drawer-toggle-icon" class="fa fa-bars fa-inverse fa-lg"></i></span>
    <div id="smalltitle" class="header-widget smalltitle-widget">在 ArchWSL 中开启 ssh 服务</div>
    <span id="search-widget" class="header-widget search-widget" onclick="">
        <i class="fa fa-search fa-inverse fa-lg"></i>
    </span>
    <span id="share-widget" class="header-widget share-widget" onclick="">
        <i class="fa fa-share-alt fa-inverse fa-lg"></i>
    </span>
</div><div id="main" class="main"><style>
    .header-title {
        width: 100%;
        height: calc(210px - var(--header-height));
        background-color: var(--theme-color);
    }

    .column.col-mid {
        display: flex;
    }

    .post-content-row {
        width: calc(100% - var(--toc-width));
        margin: 0;
    }

    .post-toc-row {
        width: var(--toc-width);
        text-align: left;
    }

    .post-content-card {
        width: 100%;
        color: #212121;
        -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
        font: normal 1em Roboto, "Helvetica Neue", Helvetica, Arial, "Microsoft Yahei", sans-serif;
        box-sizing: border-box;
        margin-top: -120px;
        min-height: 800px;
        padding: 35px;
        background: #fff;
        border-radius: 4px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        text-align: left;
        overflow: hidden;
        word-break: break-all;
    }

    .post-title {
        color: #212121;
        -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
        font: normal 1em Roboto, "Helvetica Neue", Helvetica, Arial, "Microsoft Yahei", sans-serif;
        box-sizing: border-box;
        margin: 0;
        font-weight: 400;
        line-height: 48px;
        font-size: 32px;
    }

    .post-date {
        font-family: source sans pro, helvetica neue, Arial, sans-serif;
        font-weight: 400;
        -webkit-font-smoothing: antialiased;
        line-height: 1.5;
        font-size: 14px;
        color: #8a8a8a;
    }

    .post-content {
        font-size: 15px;
        line-height: 26px;
        letter-spacing: 0.7px;
    }

    .post-content .highlight pre {
        background-color: #E2F0FF;
    }

    .post-content h1:target,
    .post-content h2:target,
    .post-content h3:target,
    .post-content h4:target,
    .post-content h5:target,
    .post-content h6:target {
        padding-top: var(--header-height);
        margin-top: calc(- var(--header-height));
    }

    @media screen and (max-width: 760px) {
        .post-toc-row {
            display: none;
        }

        :root {
            --toc-width: 0px;
        }
    }

    .row-footer-nav {
        width: 100%;
        height: 80px;
        clear: both;
    }

    .col-footer-nav {
        margin-top: 50px;
        width: 47%;
        height: 100%;
    }

    .col-footer-nav.prev {
        padding-left: 20px;
        text-align: left;
        float: left;
    }

    .col-footer-nav.next {
        padding-right: 20px;
        text-align: right;
        float: right;
    }

    .col-footer-nav h4 {
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        color: #3f51b5;
        box-sizing: border-box;
        margin: 0;
        font-weight: 400;
        font-size: 20px;
        line-height: 28px;
        position: relative;
        display: inline-block;
    }
</style>

<div class="header-title">
</div>

<div class="row-main">
    <div class="column col-mid">
        <div class="post-content-row">
            <div id="post-content-card" class="post-content-card">
                <h1 class="post-title">在 ArchWSL 中开启 ssh 服务</h1>
                <div class="post-date">2020年05月22日</div>
                <div class="post-content" id="post-content"><h3 id="在-archwsl-中开启-ssh-服务">在 <strong>ArchWSL</strong> 中开启 <strong>ssh</strong> 服务</h3>
<p><a href="https://github.com/yuk7/ArchWSL"><strong>ArchWSL</strong></a> 中默认是没有ssh服务的, 但是可以模仿 <strong>Ubuntu WSL</strong> 的方案自己创建一个服务, 具体步骤如下:</p>
<ol>
<li>
<p>将服务脚本放置到 <code>/etc/init.d</code> 目录下<br>
这里可以直接使用 <strong>UbuntuWSL</strong> 的脚本</p>
</li>
<li>
<p>试着运行一下脚本:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sudo /etc/init.d/ssh
</code></pre></div><p>发现报错: <code>line 25: /lib/lsb/init-functions: No such file or directory</code><br>
把 <strong>UbuntuWSL</strong> 中的 <code>/lib/lsb/init-fuctions</code> 复制到 <a href="https://github.com/yuk7/ArchWSL"><strong>ArchWSL</strong></a> 的相同目录下</p>
</li>
<li>
<p>再试着运行一下<br>
这次错误不一样: <code>start-stop-daemon: command not found</code><br>
在 <strong>UbuntuWSL</strong> 中执行命令:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ which start-stop-daemon
</code></pre></div><p>得到 start-stop-daemon  的路径 <code>/sbin/start-stop-daemon</code></p>
<p>同样将该文件复制到 <a href="https://github.com/yuk7/ArchWSL"><strong>ArchWSL</strong></a> 中的相同目录下</p>
</li>
<li>
<p>再再试着运行一下<br>
还是报错: <code>no hostkeys available -- exiting.</code>
在 ArchLinux 中执行:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sudo ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key
$ sudo ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key
</code></pre></div><p>( ps : 一路回车就好 )</p>
</li>
<li>
<p>最后运行一下, 如果ssh端口没有被占用的话, 应该就能启动成功了。如果端口被占用或者想进行其他配置, 可以编辑 <code>/etc/ssh/sshd_config</code> 进行修改</p>
</li>
<li>
<p>开启 sshd 已经没有问题了, 我们还可以进一步将 <code>/etc/init.d/ssh</code> 脚本注册到 systemctl<br>
ArchLinux 自带的 systemctl 应该是无法使用的, 可以参照 <a href="https://github.com/yuk7/ArchWSL/wiki/Known-issues"><strong>ArchWSL Wiki</strong></a> 中的方法重新安装 systemctl, 然后 <code>systemctl restart ssh</code> 应该就能用了</p>
</li>
</ol>
</div>
            </div><div class="row-footer-nav"><div class="col-footer-nav prev">
                    <a href="/posts/arch-deepin-qq/">
                        <h4>&lt; &nbsp;在 Archlinux 上安装 deepin-wine-qq</h4>
                    </a>
                </div><div class="col-footer-nav next">
                    <a href="/posts/date-default-format/">
                        <h4>更改 date 命令的默认输出格式&nbsp; &gt; </h4>
                    </a>
                </div></div></div>
        <div class="post-toc-row">
            <style>
    .target-fix {
        position: relative;
         
        height: var(--header-height);
        margin-top: calc(0px - var(--header-height));
        display: block;
        visibility: hidden;
    }

    .post-toc-wrap {
        padding-left: 30px;
    }

    .post-toc-wrap a {
        text-decoration: none;
    }

    .post-toc-wrap a:hover {
        color: var(--theme-color);
        text-decoration: underline;
    }
</style>

<nav class="post-toc-wrap" id="post-toc">
    <h4>TOC</h4>
    <ol class="post-toc">
        <li class="post-toc-item post-toc-level-2 active"><a class="post-toc-link" href="#静态数据"><span
                    class="post-toc-number">1.</span> <span class="post-toc-text">静态数据</span></a></li>
        <li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#静态数据分离"><span
                    class="post-toc-number">2.</span> <span class="post-toc-text">静态数据分离</span></a>
            <ol class="post-toc-child post-toc-shrink">
                <li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置、工具类数据"><span
                            class="post-toc-number">2.1.</span> <span class="post-toc-text">配置、工具类数据</span></a></li>
                <li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#枚举类数据"><span
                            class="post-toc-number">2.2.</span> <span class="post-toc-text">枚举类数据</span></a></li>
                <li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#i18n"><span
                            class="post-toc-number">2.3.</span> <span class="post-toc-text">i18n</span></a></li>
            </ol>
        </li>
        <li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#END"><span
                    class="post-toc-number">3.</span> <span class="post-toc-text">END</span></a></li>
    </ol>
</nav>

<script>
    (function () {
        createToc();

        var as = document.getElementById("post-toc").querySelectorAll("a");
        as.forEach(function (a, index) {
            a.addEventListener("click", function () {
                setActive(a);
            })
        });
    })();

    function setActive(a) {
        removeActive();
        $(a.parentNode).addClass("active");
        closeOl(a.parentNode);
        var ols = a.parentNode.querySelectorAll("ol");
        if (ols.length > 0) {
            var ol = ols[0];
            $(ol).removeClass("post-toc-shrink");
            $(ol).addClass("post-toc-expand");
        }
    }

    function removeActive() {
        var lis = document.getElementById("post-toc").querySelectorAll("li.active");
        lis.forEach(function (li, index) {
            $(li).removeClass("active");
        })
    }

    function closeOl(li) {
        var lis = li.parentNode.children;
        for (var i = 0, len = lis.length; i < len; i++) {
            var item = lis[i];
            if (item !== li) {
                var ols = item.querySelectorAll("ol.post-toc-child");
                console.log(ols);
                ols.forEach(function (ol, index) {
                    $(ol).removeClass("post-toc-expand");
                    $(ol).addClass("post-toc-shrink");
                });
            }
        }
    }

    function createToc() {
        var code = ``;
        var hs = document.getElementById("post-content").querySelectorAll("h1, h2, h3, h4, h5, h6");

        console.log("hs: " + hs);
        hs.forEach(function (h, index) {
            console.log(h.innerHTML);
            var target = document.createElement("a");
            target.setAttribute("class", "target-fix");
            target.setAttribute("id", h.getAttribute("id") + "-target");
            h.parentNode.insertBefore(target, h);
        });

        var toc = new Array();
        var first = new Object();

        first.id = hs[0].getAttribute("id");
        first.lv = getLv(hs[0]);
        first.text = hs[0].innerText;
        first.children = null;

        toc.push(first);

        for (var i = 1, len = hs.length; i < len; i++) {

            var lv = getLv(hs[i]);
            var h = new Object();
            h.id = hs[i].getAttribute("id");
            h.lv = lv;
            h.text = hs[i].innerText;
            h.children = null;

            if (lv <= getLv(hs[i - 1])) {
                add(toc, h);
            } else {
                setChildren(toc, h);
            }
        }
        
        var h = toc[0];
        code += `<li class="post-toc-item post-toc-level-` + h.lv + ` active"><a class="post-toc-link" href="#` + h.id + `-target"><span
                    class="post-toc-number"></span> <span class="post-toc-text">` + h.text + `</span></a>` + childrenCode(h) + `</li>`
        for (var i = 1, len = toc.length; i < len; i++) {
            var h = toc[i];
            code += `<li class="post-toc-item post-toc-level-` + h.lv + `"><a class="post-toc-link" href="#` + h.id + `-target"><span
                    class="post-toc-number"></span> <span class="post-toc-text">` + h.text + `</span></a>` + childrenCode(h) + `</li>`
        }

        code = `<h4>TOC</h4><ol class="post-toc">` + code + `</ol>`
        
        var nav = document.getElementById("post-toc");
        nav.innerHTML = code;
    }
    function add(toc, h) {
        var latest = toc[toc.length - 1];
        if (latest.lv == h.lv) {
            toc.push(h);
            return;
        } else {
            add(latest.children, h);
        }
    }

    function setChildren(toc, h) {
        var latest = toc[toc.length - 1];
        if (latest.children == null) {
            latest.children = new Array();
            latest.children.push(h);
        } else {
            setChildren(latest.children, h);
        }
    }

    function childrenCode(toc) {
        var code = "";
        if (toc.children != null) {
            for (var i = 0, len = toc.children.length; i < len; i++) {
                var h = toc.children[i];
                code += `<li class="post-toc-item post-toc-level-` + h.lv + `"><a class="post-toc-link" href="#` + h.id + `-target"><span
                    class="post-toc-number"></span> <span class="post-toc-text">` + h.text + `</span></a>` + childrenCode(h) + `</li>`
            }
            return `<ol class="post-toc-child post-toc-shrink">` + code + `</ol>`;
        }
        return "";
    }

    function getLv(h) {
        return h.tagName.substring(1);
    }
</script>
        </div>
    </div>
</div>

<script>
    (function () {
        removeHighlight();
    })();

    function removeHighlight() {
        var pre = $(".post-content .highlight pre");
        for (var i = 0, len = pre.length; i < len; i++) {
            pre[i].removeAttribute("style");
        }
    }
</script></div><style>
    .footer {
        width: calc(100% - var(--drawer-width));
        margin: 0 0 0 var(--drawer-width);
        padding: 0;
        text-align: center;
        float: right;
        transition: var(--right-transtion);
        color: rgba(255, 255, 255, 0.6);
    }

    .footer.footer-top {
        line-height: 27px;
        font-size: 14px;
        background-color: var(--theme-color);
        height: 52px;
    }

    .footer.footer-bottom {
        background-color: #303F9F;
        height: 72px;
    }

    .footer-hugo {
        -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
        font: normal 1em Roboto, "Helvetica Neue", Helvetica, Arial, "Microsoft Yahei", sans-serif;
        line-height: 1.6;
        font-size: 13px;
        text-align: center;
        box-sizing: border-box;
    }
</style>

<div class="footer footer-top">
    <p>This is My Notes</p>
</div>
<div id="footer-bottom" class="footer footer-bottom">
    <div class="footer-hugo">
        <p>Created with Hugo | Theme - Leem</p>
        <p>© 2020-Now by Limgmk</p>
    </div>
</div><style>
     
    .main-mask {
        visibility: hidden;
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        z-index: 499;
        width: 100%;
        height: 150%;
        background: #000;
        opacity: 0;
        pointer-events: none;
        -webkit-transition: .3s ease-in-out;
        transition: .3s ease-in-out;
    }

     
    @media screen and (max-width: 1240px) {

        .main-mask.in {
            visibility: visible;
            pointer-events: auto;
            opacity: .3;
        }
    }
</style>

<div id="main-mask" class="main-mask" onmousedown="changeDrawer()"></div>

<script>
    (function () {
        if (jundgeDrawerStatus()) {
            openMask();
        }
    })();
</script>
</body>

</html>